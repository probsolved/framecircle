<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h4 mb-0"><%= @user.respond_to?(:name_for_display) ? @user.name_for_display : (@user.display_name.presence || @user.email) %></h1>

    <%= link_to "Back", (request.referer.presence || groups_path), class: "btn btn-outline-secondary" %>
  </div>

  <div class="card shadow-sm">
    <div class="card-body d-flex gap-3 align-items-start">
      <div class="flex-shrink-0">
        <% if @user.respond_to?(:avatar) && @user.avatar.attached? %>
        <%= image_tag url_for(@user.avatar),
                class: "rounded-circle border",
                style: "width:96px;height:96px;object-fit:cover;" %>
        <% else %>
        <div class="rounded-circle border bg-light d-flex align-items-center justify-content-center" style="width:96px;height:96px;">
          <span class="text-muted fw-semibold" style="font-size:32px;">
            <%= @user.email.to_s.first&.upcase %>
          </span>
        </div>
        <% end %>
      </div>

      <div class="flex-grow-1">
        <div class="text-muted small mb-2"><%= @user.email %></div>

        <% if @user.respond_to?(:location) && @user.location.present? %>
        <div class="mb-3 text-muted">
          üìç <%= @user.location %>
        </div>
        <% end %>

        <% if @user.respond_to?(:frames_profile_url) && @user.frames_profile_url.present? %>
        <%= link_to "52Frames Profile", @user.frames_profile_url, target: "_blank", rel: "noopener" %>
        <% elsif @user.respond_to?(:frames_username) && @user.frames_username.present? %>
        <%= link_to "52Frames Profile", "https://52frames.com/photographer/#{@user.frames_username}", target: "_blank", rel: "noopener" %>
        <% else %>
        <div class="text-muted small">52Frames profile not set</div>
        <% end %>
      </div>
    </div>
  </div>
</div>